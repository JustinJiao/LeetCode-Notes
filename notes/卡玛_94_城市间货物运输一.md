# 卡玛 94 城市间货物运输一

## 题目链接: https://kamacoder.com/problempage.php?pid=1152

## 题目描述
某国为促进城市间经济交流，决定对货物运输提供补贴。共有 n 个编号为 1 到 n 的城市，通过道路网络连接，网络中的道路仅允许从某个城市单向通行到另一个城市，不能反向通行。



网络中的道路都有各自的运输成本和政府补贴，道路的权值计算方式为：运输成本 - 政府补贴。权值为正表示扣除了政府补贴后运输货物仍需支付的费用；权值为负则表示政府的补贴超过了支出的运输成本，实际表现为运输过程中还能赚取一定的收益。



请找出从城市 1 到城市 n 的所有可能路径中，综合政府补贴后的最低运输成本。如果最低运输成本是一个负数，它表示在遵循最优路径的情况下，运输过程中反而能够实现盈利。



城市 1 到城市 n 之间可能会出现没有路径的情况，同时保证道路网络中不存在任何负权回路。

输入描述
第一行包含两个正整数，第一个正整数 n 表示该国一共有 n 个城市，第二个整数 m 表示这些城市中共有 m 条道路。 

接下来为 m 行，每行包括三个整数，s、t 和 v，表示 s 号城市运输货物到达 t 号城市，道路权值为 v （单向图）。

输出描述
如果能够从城市 1 到连通到城市 n， 请输出一个整数，表示运输成本。如果该整数是负数，则表示实现了盈利。如果从城市 1 没有路径可达城市 n，请输出 "unconnected"。
输入示例
6 7
5 6 -2
1 2 1
5 3 1
2 5 2
2 4 -3
4 6 4
1 3 5
输出示例
1
## 解题思路
- ** 方法 1 ** ：Bellman-Ford 算法
这道题可以利用 Bellman-Ford 算法进行计算，存储从起点到各个点的最短路径，然后进行松弛操作。
对每条边进行 n-1 次松弛操作，最后判断从起点到终点的距离是否为无穷大。如果是无穷大，说明起点到终点不可达，输出 "unconnected"；否则输出最短路径长度。
每次松弛操作时，遍历所有边，更新起点到终点的最短路径。
第k次松弛操作后，所有从起点出发，经过不超过k条边所能到达的各个顶点的最短路径都已经被正确计算出来。
时间复杂度`O(N*M)` 
空间复杂度：`O(N+M)`

- ** 方法 2 ** ：Bellman-Ford 算法优化
在 Bellman-Ford 算法的基础上进行优化，使用队列来存储需要松弛的节点，避免每次都遍历所有边。
每次从队列中取出一个节点，对其所有邻接节点进行松弛操作，如果邻接节点的距离被更新，则将其加入队列。
时间复杂度：理论上仍为`O(N*M)`，但实际运行时间更快。
空间复杂度：`O(N+M)`

📌 [查看 Python 代码](../solutions/python/卡玛_94_城市间货物运输一.py)
# LeetCode No.188 买卖股票的最佳时机4

## 题目链接: https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/description/

## 题目描述
给你一个整数数组 prices 和一个整数 k ，其中 prices[i] 是某支给定的股票在第 i 天的价格。

设计一个算法来计算你所能获取的最大利润。你最多可以完成 k 笔交易。也就是说，你最多可以买 k 次，卖 k 次。

注意：你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。
## 解题思路
- ** 方法 1 ** ：动态规划
利用滚动数组，一维数组存储，不存储下标，只存储状态。
1. dp含义：
dp[0]代表，在第i天，不操作的最大利润。
dp[1]代表，在第i天，第一次持有股票的最大利润。
dp[2]代表，在第i天，第一次不持有股票的最大利润。
dp[3]代表，在第i天，第二次持有股票的最大利润。
dp[4]代表，在第i天，第二次不持有股票的最大利润。
因为这个是k次操作，所以如果是奇数代表持有，偶数代表不持有
2. 递推公式：
dp[i][0]有一种状态，因为是不操作，所以前一天是什么就是什么也就是dp[i-1][0]

dp[i][1]意味着在第i天第一次持有股票的最大利润，那么有两种状态：
第一种：在前一天也持有股票，那么状态就是转移的，也就是dp[i-1][1]。
第二种：前一天不持有股票，但持有了，那么就是今天把股票买了，所以也就是dp[i-1][0]-price[i]因为是第一次持有，所以之前是不操作。

dp[i][2]意味着在第i天第一次不持有股票的最大利润，那么有两种状态：
第一种：在前一天也不持有股票，那么状态就是转移的，也就是dp[i-1][2]。
第二种：前一天持有股票，但今天不持有了，那么就是今天把股票卖出去了，是dp[i-1][1]+prices[i]

dp[i][3]意味着在第i天第二次持有股票的最大利润，那么有两种状态：
第一种：在前一天也持有股票，那么状态就是转移的，也就是dp[i-1][3]。
第二种：前一天不持有股票，但持有了，那么就是今天把股票买了，所以也就是dp[i-1][2]-price[i]因为是第一次持有，所以之前是不操作。

dp[i][4]意味着在第i天第二次不持有股票的最大利润，那么有两种状态：
第一种：在前一天也不持有股票，那么状态就是转移的，也就是dp[i-1][4]。
第二种：前一天持有股票，但今天不持有了，那么就是今天把股票卖出去了，是dp[i-1][3]+prices[i]

和之前一样的，奇数代表持有，那么就是dp[j-1]-prices[i]
偶数代表不持有，那么就是dp[j-1]+prices[i]
时间复杂度`O(N）` 
空间复杂度：`O(1)`

📌 [查看 Python 代码](../solutions/python/No_188_买卖股票的最佳时机四.py)